{"ast":null,"code":"import _slicedToArray from \"/media/amine/HDD1/Kraya/2DNI/TP/S2/RFID/E-Library/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/media/amine/HDD1/Kraya/2DNI/TP/S2/RFID/E-Library/Frontend/src/HeaderClient.js\";\nimport React, { useEffect, useState } from 'react';\nimport './Style/HeaderClient.css';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport { auth, provider } from './firebase';\nimport axios from './axios';\n\nfunction HeaderClient() {\n  var number = 0;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      users = _useState4[0],\n      setUsers = _useState4[1];\n\n  var header__itemStyle = {\n    position: 'relative',\n    top: '-1.5rem',\n    left: '0.01rem',\n    borderRadius: '50%'\n  };\n\n  var getAllClients = function getAllClients() {\n    axios.get('get/allClients').then(function (res) {\n      setUsers(res.data);\n    });\n  };\n\n  useEffect(function () {\n    getAllClients();\n  }, []); //console.log(users)\n\n  var signIn = function signIn() {\n    auth.signInWithPopup(provider).then(function () {\n      setName(auth.currentUser.displayName);\n\n      var findName = function findName(find) {\n        return find.clientName === auth.currentUser.displayName;\n      };\n\n      console.log(users);\n      var found = users.some(findName);\n\n      if (found) {\n        axios.post(\"/update/clienIsConnected?clientName=\".concat(auth.currentUser.displayName), {\n          isConnected: true\n        });\n      } else {\n        console.log(\"hani hneye\");\n        axios.post('/new/client', {\n          clientName: auth.currentUser.displayName,\n          clientMail: auth.currentUser.email,\n          isConnected: true\n        });\n      }\n    }).catch(function (error) {\n      return alert(error.message);\n    });\n  };\n\n  var signOut = function signOut() {\n    axios.post(\"/update/clienIsConnected?clientName=\".concat(name), {\n      isConnected: false\n    });\n    setName('');\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Search for a book\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__option\",\n    onClick: signIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, \"Welcome \", name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__option\",\n    onClick: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, \" Bye ? \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__right__option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ShoppingCartIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"header__item\",\n    style: number === 0 ? {\n      display: 'none'\n    } : header__itemStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, number)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header__right__option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteBorderIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"header__item\",\n    style: number === 0 ? {\n      display: 'none'\n    } : header__itemStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, number))));\n}\n\nexport default HeaderClient;","map":{"version":3,"sources":["/media/amine/HDD1/Kraya/2DNI/TP/S2/RFID/E-Library/Frontend/src/HeaderClient.js"],"names":["React","useEffect","useState","SearchIcon","ShoppingCartIcon","FavoriteBorderIcon","auth","provider","axios","HeaderClient","number","name","setName","users","setUsers","header__itemStyle","position","top","left","borderRadius","getAllClients","get","then","res","data","signIn","signInWithPopup","currentUser","displayName","findName","find","clientName","console","log","found","some","post","isConnected","clientMail","email","catch","error","alert","message","signOut","window","location","reload","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './Style/HeaderClient.css'\nimport SearchIcon from '@material-ui/icons/Search';\nimport ShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport { auth, provider } from './firebase'\nimport axios from './axios'\n\n\nfunction HeaderClient() {\n    \n    const number = 0;\n    const [name, setName] = useState('')\n    const [users, setUsers ] = useState([])\n\n    const header__itemStyle  = {\n\n        position: 'relative',\n        top: '-1.5rem',\n        left: '0.01rem',\n        borderRadius: '50%'\n        \n    };\n\n    const getAllClients = () => {\n        axios.get('get/allClients').then((res) => {\n            setUsers(res.data)\n        })\n    }\n\n    useEffect(() => {\n        getAllClients()\n    }, [])\n\n    //console.log(users)\n\n    const signIn = () => {\n        \n        auth.signInWithPopup(provider).then( () => {\n\n            setName(auth.currentUser.displayName)\n            const findName = (find) => find.clientName === auth.currentUser.displayName;\n            console.log(users)\n            const found = users.some(findName);\n\n            if(found) {\n                \n                axios.post(`/update/clienIsConnected?clientName=${auth.currentUser.displayName}`, {\n                    isConnected: true\n                })\n            \n            } else {\n                console.log(\"hani hneye\")\n\n                axios.post('/new/client', {\n                \n                    clientName: auth.currentUser.displayName,\n                    clientMail: auth.currentUser.email,\n                    isConnected: true\n\n                })\n            }\n       \n        }\n            \n        )\n        .catch((error) => alert(error.message))\n    }\n     \n    const signOut = () => {\n        \n        axios.post(`/update/clienIsConnected?clientName=${name}`, {\n            isConnected: false\n        })\n\n        setName('')\n        window.location.reload();\n    }\n    \n    return (\n\n        <div className='header__main'>\n\n            <div className='header__left'>\n\n                <SearchIcon />\n                <input placeholder='Search for a book' type='text'/>\n            \n            </div>\n\n            <div className='header__middle'>\n            \n                <div className='header__option' onClick={signIn}>\n                        \n                        <h1>Welcome {name}</h1>\n            \n                </div>\n\n                <div className='header__option' onClick={signOut}>\n                        \n                        <h2> Bye ? </h2>\n                    \n                </div>\n                \n            </div>\n\n            <div className='header__right'>\n\n                <div className='header__right__option'>\n                    <ShoppingCartIcon fontSize='large'/>\n\n                    <span className='header__item' \n                            style={ number === 0 ? { display: 'none' }: header__itemStyle }>\n                        {number}\n                    </span>\n\n                </div>\n                \n                <div className='header__right__option'>\n                    \n                    <FavoriteBorderIcon fontSize='large'/>\n                    <span className='header__item' style={ number === 0 ? { display: 'none' }: header__itemStyle }>\n                        {number}\n                    </span>\n\n                </div>\n                \n            </div>\n\n        </div>\n\n    )\n}\n\nexport default HeaderClient"]},"metadata":{},"sourceType":"module"}